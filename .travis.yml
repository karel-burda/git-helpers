stages:
  - test -- linux, shellcheck

git:
  depth: 1

jobs:
  include:
     - stage: test -- linux, shellcheck
       dist: trusty
       os: linux
       addons:
         apt:
           packages:
             - shellcheck
       script:
         - set -e

         - pushd tests/integration

         - shellcheck --shell=bash --external-sources --exclude=SC1090 run-all-tests.sh gitignore_test.sh gitattributes_test.sh
         - ./run-all-tests.sh

         - set +e
